<!DOCTYPE html>

<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Quiz DWWM Interactif Multijoueur</title>
<style>
#mobilePlayerUI {
  padding: 1rem;
  max-width: 480px;
  margin: auto;
  background: #f9f9f9;
  border-radius: 1rem;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
  margin-top: 2rem;
}
.mobile-box {
  font-size: 1.2rem;
  margin-bottom: 1rem;
  font-weight: bold;
}
.mobile-choices {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  margin-bottom: 1rem;
}
.mobile-choice {
  padding: 1rem;
  background: #e0e0e0;
  border-radius: 0.75rem;
  text-align: center;
  font-size: 1rem;
  user-select: none;
  cursor: pointer;
  transition: background 0.2s;
}
.mobile-choice.selected {
  background: #74b9ff;
  color: white;
}
.mobile-button {
  width: 100%;
  padding: 1rem;
  font-size: 1.1rem;
  background: #0984e3;
  color: white;
  border: none;
  border-radius: 0.75rem;
  cursor: pointer;
}
.mobile-feedback {
  margin-top: 1rem;
  font-size: 1rem;
  text-align: center;
}
</style>
</head>
<body>

<!-- Firebase SDK -->


<!-- QR Code Library -->

<!-- Questions DWWM -->


<script>
function isMobileDevice() {
  return /Android|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i.test(navigator.userAgent);
}

function showMobileQuestion(question) {
  const box = document.getElementById('mobileQuestion');
  const choicesBox = document.getElementById('mobileChoices');
  const feedback = document.getElementById('mobileFeedback');
  const submit = document.getElementById('mobileSubmit');

  box.textContent = question.title;
  choicesBox.innerHTML = '';
  feedback.textContent = '';

  const selected = new Set();

  question.choices.forEach((choice, i) => {
    const div = document.createElement('div');
    div.className = 'mobile-choice';
    div.textContent = choice;
    div.onclick = () => {
      if (question.answer.length === 1) {
        selected.clear();
        document.querySelectorAll('.mobile-choice').forEach(el => el.classList.remove('selected'));
      }
      if (selected.has(i)) {
        selected.delete(i);
        div.classList.remove('selected');
      } else {
        selected.add(i);
        div.classList.add('selected');
      }
    };
    choicesBox.appendChild(div);
  });

  submit.onclick = () => {
    if (selected.size === 0) {
      feedback.textContent = 'Sélectionnez au moins une réponse.';
      return;
    }
    submitAnswersToQuestion(Array.from(selected));
    document.getElementById('mobilePlayerUI').style.display = 'none';
  };
}

// Intégration dans showQuestion existant
const originalShowQuestion = window.showQuestion;
window.showQuestion = function(questionData) {
  if (isMobileDevice() && !isHost) {
    showMobileQuestion(questionData);
  } else {
    if (typeof originalShowQuestion === 'function') {
      originalShowQuestion(questionData);
    }
  }
};
</script></body>
</html>
